{"version":3,"sources":["components/FindABook.module.scss","components/Navigation.module.scss","redux/bookSlice.js","components/ToRead.js","services/openLibraryAPI.js","components/FindABook.js","components/Finished.js","Routes.js","components/Navigation.js","App.js","redux/store.js","index.js"],"names":["module","exports","bookSlice","createSlice","name","initialState","toRead","reducers","addBook","state","action","push","payload","read","markAsRead","book","filter","item","key","actions","selectBooks","books","ToRead","history","useHistory","useSelector","dispatch","useDispatch","handleBookClick","event","index","target","className","length","map","type","id","checked","onChange","htmlFor","title","author","onClick","axios","defaults","adapter","require","api","create","baseURL","FindABook","useState","setBooks","loading","setLoading","error","setError","booksToRead","fetch","value","a","get","params","then","result","data","docs","author_name","join","list","forEach","isAdded","onChangeTitle","debounce","err","message","placeholder","e","newBooks","onClickBook","styles","added","Finished","finishedBooks","Routes","children","RouteWrapper","isPrivate","path","exact","component","to","rest","Navigation","wrapper","App","store","configureStore","reducer","bookReducer","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1e3ef42f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"added\":\"FindABook_added__2zXwo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Navigation_wrapper__2xxZt\"};","import { createSlice } from '@reduxjs/toolkit';\r\n\r\nconst initialState = {\r\n  toRead: []\r\n};\r\n\r\nexport const bookSlice = createSlice({\r\n  name: 'books',\r\n  initialState,\r\n  reducers: {\r\n    addBook: (state, action) => {\r\n      state.toRead.push({...action.payload, read: false});\r\n    },\r\n    markAsRead: (state, action) => {\r\n      let book = state.toRead.filter(item => item.key === action.payload);\r\n      book[0].read = !book[0].read;\r\n    }\r\n  }\r\n});\r\n\r\nexport const { addBook, markAsRead } = bookSlice.actions;\r\n\r\nexport const selectBooks = (state) => state.books.toRead;\r\n\r\nexport default bookSlice.reducer;\r\n","import { useHistory } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectBooks, markAsRead } from '../redux/bookSlice';\r\nimport { useDispatch } from 'react-redux';\r\n\r\n\r\nexport default function ToRead() {\r\n  const history = useHistory();\r\n  const books = useSelector(selectBooks);\r\n  const dispatch = useDispatch(); \r\n\r\n  const handleBookClick = event => {\r\n    const index = event.target.name;\r\n    dispatch(markAsRead(books[index].key));\r\n  }\r\n\r\n  const goToFindABook = () => {\r\n    history.push('/find')\r\n  }\r\n\r\n  return (\r\n    <div className={'page'}>\r\n      <h1>To Read List</h1>\r\n      <ul>\r\n        { (books && books.length > 0) && books.map((item, index) => (\r\n            <li key={index}>\r\n              <input\r\n                type=\"checkbox\"\r\n                id={`book-${index}`}\r\n                data-testid={`book-${index}`}\r\n                name={`${index}`}\r\n                checked={item.read ? true : false}\r\n                onChange={handleBookClick}\r\n              />\r\n                <label htmlFor={`book-${index}`}>\r\n                <span>{item.title}</span>\r\n                <br/>\r\n                <span>{item.author}</span>\r\n              </label>\r\n            </li>\r\n          ))\r\n        }\r\n      </ul>\r\n      { (!books || books.length === 0) &&\r\n        <div>\r\n          <p>Nothing was added to the list yet.</p>\r\n          <p>Try finding some interesting books.</p>\r\n          <button onClick={goToFindABook}>Find Books</button>\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}","import axios from \"axios\";\r\n\r\n// Using the Node adapter to enable testing with Nock\r\naxios.defaults.adapter = require('axios/lib/adapters/http');\r\n\r\nconst api = axios.create({\r\n  baseURL: \"https://openlibrary.org\",\r\n});\r\n\r\nexport const search = title => {\r\n  return api.get(\"search.json\", { params: { title } }).then( result => {\r\n    return result.data.docs.map(item => ({\r\n      title: item.title,\r\n      author: item.author_name ? item.author_name.join() : 'Unknown author',\r\n      key: item.key\r\n    }));\r\n  });\r\n}\r\n","import { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { debounce } from 'lodash';\r\nimport { search } from '../services/openLibraryAPI';\r\nimport { addBook } from '../redux/bookSlice';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectBooks } from '../redux/bookSlice';\r\nimport styles from './FindABook.module.scss';\r\n\r\nexport default function FindABook() {\r\n  const [books, setBooks] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const booksToRead = useSelector(selectBooks);\r\n  const dispatch = useDispatch(); \r\n\r\n  const fetch = async (value) => {\r\n    let list = await search(value);\r\n\r\n    booksToRead.forEach( book => {\r\n      list.forEach( item => {\r\n        if( book.key === item.key ) {\r\n          item.isAdded = true;\r\n        }\r\n      })\r\n    })\r\n\r\n    setBooks(list);\r\n  }\r\n\r\n  const onChangeTitle = debounce( async value => {\r\n    if(value.length < 4) {\r\n      setBooks([]);\r\n      return null;\r\n    }\r\n    setLoading(true);\r\n    try{\r\n      fetch(value);\r\n      setError('');\r\n    } catch(err) {\r\n      setBooks([]);\r\n      setError(`Something went wrong: ${err.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, 500);\r\n\r\n  const onClickBook = index => {\r\n    if(books[index].isAdded)\r\n      return;\r\n      \r\n    let newBooks = [...books];\r\n    newBooks[index].isAdded = true;\r\n    setBooks(newBooks)\r\n    dispatch(addBook(books[index]));\r\n  }\r\n\r\n  return (\r\n    <div className={'page'}>\r\n      <h1>Find a Book</h1>\r\n      <input\r\n        type=\"text\"\r\n        id=\"title\"\r\n        name=\"title\"\r\n        placeholder=\"Enter a book's title\"\r\n        onChange={e => onChangeTitle(e.target.value)}\r\n      />\r\n      \r\n      {loading &&\r\n        <p>Loading...</p>\r\n      }\r\n      {error &&\r\n        <p>{error}</p>\r\n      }\r\n\r\n      <ul>\r\n        {!loading && books.map((book, index) => (\r\n          <li\r\n            key={index}\r\n            onClick={() => onClickBook(index)}\r\n            className={book.isAdded ? styles.added : null}\r\n          >\r\n            <span>{book.title}</span>\r\n            <br/>\r\n            <span>{book.author}</span>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  )\r\n}","import { useSelector } from 'react-redux';\r\nimport { selectBooks } from '../redux/bookSlice';\r\n\r\nexport default function Finished() {\r\n  const books = useSelector(selectBooks);\r\n  const finishedBooks = books.filter(book => book.read);\r\n\r\n  return (\r\n    <div className={'page'}>\r\n      <h1>Finished Books</h1>\r\n      { finishedBooks.length > 0 && finishedBooks.map((item, index) => (\r\n          <li key={index}>\r\n            <span>{item.title}</span>\r\n            <br/>\r\n            <span>{item.author}</span>\r\n          </li>\r\n        ))\r\n      }\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport { BrowserRouter, Redirect, Route, Switch } from 'react-router-dom';\r\nimport ToRead from './components/ToRead'\r\nimport FindABook from './components/FindABook'\r\nimport Finished from './components/Finished'\r\n\r\n\r\nexport default function Routes({children}) {\r\n  return (\r\n    <BrowserRouter>\r\n      { children }\r\n      <Switch>\r\n        <RouteWrapper isPrivate={true} path='/' exact component={ToRead} />\r\n        <RouteWrapper isPrivate={true} path='/find' component={FindABook} />\r\n        <RouteWrapper isPrivate={true} path='/finished' component={Finished} />\r\n        {/* <RouteWrapper isPrivate={false} path='/login' component={Login} />\r\n\r\n        {/* Redirects a user to a valid path in case of 404 */}\r\n        <Redirect to=\"/\" />\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nfunction RouteWrapper({ component, isPrivate, ...rest }) {\r\n  const isLogged = () => true;\r\n  const logged = isLogged();\r\n\r\n  if (isPrivate && !logged) {\r\n    return <Redirect to=\"/login\" />;\r\n  }\r\n\r\n  if (!isPrivate && logged) {\r\n    return <Redirect to=\"/\" />\r\n  }\r\n\r\n  return <Route {...rest} component={component} />;\r\n}","import { Link } from \"react-router-dom\";\r\nimport styles from './Navigation.module.scss';\r\n\r\nexport default function Navigation() {\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <Link to=\"/\">Home</Link>\r\n      <Link to=\"/find\">Find</Link>\r\n      <Link to=\"/finished\">Finished</Link>\r\n    </div>\r\n  )\r\n}","import React from 'react';\r\nimport Routes from './Routes';\r\nimport Navigation from './components/Navigation';\r\n\r\n\r\nfunction App() {\r\n  return (\r\n    <>\r\n      <Routes>\r\n        <Navigation />\r\n      </Routes>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport bookReducer from './bookSlice';\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    books: bookReducer\r\n  },\r\n});\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport { store } from './redux/store';\r\nimport { Provider } from 'react-redux';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}